<div class="max-w-7xl mx-auto px-6 py-14 bg-gradient-to-b from-purple-50 to-indigo-50">

  <!-- Header Section -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-12">
    <div>
      <h1 class="text-4xl font-extrabold tracking-tight text-indigo-900">
        ‚ú® Latest Products
      </h1>
      <p class="text-indigo-700 mt-2 text-sm">
        Discover our newest arrivals curated just for you
      </p>
    </div>

    <div class="mt-4 md:mt-0">
      <span class="bg-indigo-100 text-indigo-800 text-sm px-5 py-2 rounded-full font-medium shadow-md">
        <%= @products.count %> Items Available
      </span>
    </div>
  </div>

  <!-- Products Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">

    <% @products.each do |product| %>
      <div class="group bg-white rounded-3xl border border-gray-200 shadow-md hover:shadow-2xl transition-all duration-500 overflow-hidden relative">

        <!-- Wishlist Button -->
        <div class="absolute top-4 right-4 z-20">
          <% if wished?(product) %>
            <%= button_to wishlists_path(product_id: product.id),
                  method: :delete,
                  class: "text-red-600 text-xl bg-white/90 backdrop-blur-md rounded-full w-10 h-10 flex items-center justify-center shadow-lg hover:scale-110 transition-transform" do %>
              ‚ù§Ô∏è
            <% end %>
          <% else %>
            <%= button_to wishlists_path(product_id: product.id),
                  method: :post,
                  class: "text-gray-400 hover:text-red-600 text-xl bg-white/90 backdrop-blur-md rounded-full w-10 h-10 flex items-center justify-center shadow-lg hover:scale-110 transition-transform" do %>
              ü§ç
            <% end %>
          <% end %>
        </div>

        <!-- Image Section -->
        <div class="relative overflow-hidden rounded-t-3xl">
          <% if product.image.attached? %>
            <%= image_tag product.image,
                  class: "w-full h-44 object-cover group-hover:scale-110 transition-transform duration-70" %>
          <% else %>
            <div class="w-full h-44 flex items-center justify-center text-gray-400 text-sm bg-indigo-50">
              No Image Available
            </div>
          <% end %>

          <!-- Colorful overlay -->
          <div class="absolute inset-0 bg-gradient-to-t from-purple-400/20 via-pink-200/10 to-transparent opacity-0 group-hover:opacity-100 transition duration-500 rounded-t-3xl"></div>
        </div>

        <!-- Content Section -->
        <div class="p-6">

          <h2 class="text-lg font-semibold text-indigo-900 truncate group-hover:text-pink-600 transition-colors duration-300">
            <%= product.name %>
          </h2>

          <p class="text-indigo-600 text-sm mt-1 mb-4">
            Premium quality product
          </p>

          <!-- Price + Stock -->
          <div class="flex items-center justify-between mb-6">
            <span class="text-2xl font-bold text-pink-600">
              ‚Çπ <%= product.price %>
            </span>

            <span class="text-xs font-medium bg-green-100 text-green-800 px-3 py-1 rounded-full animate-pulse">
              In Stock
            </span>
          </div>

          <!-- Buttons -->
          <div class="flex gap-3">
            <%= link_to product_path(product),
                  class: "flex-1 text-center border border-indigo-300 text-indigo-700 py-2.5 rounded-xl font-medium hover:bg-indigo-100 transition duration-300" do %>
              View
            <% end %>
            

            <%= button_to "Add",
                  add_to_cart_path(product.id),
                  method: :post,
                  form: { data: { turbo: false } },
                  class: "flex-1 bg-gradient-to-r from-pink-500 to-purple-600 text-white py-2.5 rounded-xl font-semibold hover:opacity-90 hover:shadow-xl transition duration-300" %>

          </div>

        </div>

      </div>
    <% end %>

  </div>

</div>
